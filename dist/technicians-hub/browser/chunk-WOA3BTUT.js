import{a as Ie,b as Ne}from"./chunk-4EU5S7LO.js";import{a as Ce,b as he}from"./chunk-XIN4KULS.js";import{b as _e,c as ve,d as Se}from"./chunk-7KHN4GSN.js";import"./chunk-53AZ54VS.js";import{a as se,b as pe,c as ce,d as de,e as ue,k as ze,m as fe,n as ge}from"./chunk-FDJQSJ4V.js";import{d as ye}from"./chunk-WESEQCCP.js";import"./chunk-JHEXQXAK.js";import{a as b,e as be}from"./chunk-7YQTHMTJ.js";import{c as ee,d as te,e as ie,f as ne,g as oe,h as re,i as ae}from"./chunk-H2G74B6L.js";import"./chunk-CESBHL5B.js";import"./chunk-GC2JCOQQ.js";import{a as me,b as le}from"./chunk-2QDM327Y.js";import{a as P,b as k}from"./chunk-H5EFK6NK.js";import{g as K,h as H,j as J,k as X,o as Y,p as Z,q as $}from"./chunk-Y4SKA4DN.js";import"./chunk-LF3AIU6I.js";import"./chunk-OX3V4ML4.js";import"./chunk-5AAZBCL7.js";import"./chunk-6RCJUTWS.js";import{d as L,e as I,g as Q,h as A,j as U,k as W,m as B,n as G,p as R,q as j,r as q}from"./chunk-YLQVLZ7P.js";import"./chunk-CN3ZPC5G.js";import"./chunk-4VDSMCYZ.js";import{Ha as O,Ia as D,j as V,k as T,p as F}from"./chunk-7ENSWGND.js";import{Ac as v,Bc as S,Cc as y,Sb as l,Tb as e,Ub as t,Vb as c,Zb as E,_b as w,ac as N,bb as r,fc as C,hc as h,la as d,lb as _,ma as u,rb as M,rc as x,wc as o,xb as g,xc as f}from"./chunk-WBOJ7OJP.js";function Ee(m,i){if(m&1&&c(0,"nz-option",14),m&2){let n=i.$implicit;l("nzValue",n)("nzLabel",n)}}function we(m,i){if(m&1&&(e(0,"nz-tag"),o(1),t()),m&2){let n=h().$implicit;r(),f(n.category)}}function xe(m,i){if(m&1){let n=N();e(0,"tr")(1,"td")(2,"code"),o(3),t()(),e(4,"td"),o(5),t(),e(6,"td"),o(7),t(),e(8,"td"),g(9,we,2,1,"nz-tag",15),t(),e(10,"td"),o(11),t(),e(12,"td"),o(13),t(),e(14,"td")(15,"nz-tag",16),o(16),t()(),e(17,"td")(18,"button",17),C("click",function(){let s=d(n).$implicit,z=h();return u(z.editItem(s))}),o(19,"Edit"),t()()()}if(m&2){let n=i.$implicit,a=h();r(3),f(n.sku),r(2),f(n.name),r(2),f(a.getUomLabel(n.uom)),r(2),l("ngIf",n.category),r(2),f(n.reorderPoint||"-"),r(2),f(n.reorderQty||"-"),r(2),l("nzColor",n.active?"green":"red"),r(),f(n.active?"Active":"Inactive")}}function Ve(m,i){if(m&1&&c(0,"nz-option",14),m&2){let n=i.$implicit;l("nzValue",n.value)("nzLabel",n.label)}}function Te(m,i){if(m&1&&(E(0),e(1,"form",18)(2,"nz-form-item")(3,"nz-form-label",19),o(4,"SKU"),t(),e(5,"nz-form-control",20),c(6,"input",21),t()(),e(7,"nz-form-item")(8,"nz-form-label",19),o(9,"Name"),t(),e(10,"nz-form-control",22),c(11,"input",23),t()(),e(12,"nz-form-item")(13,"nz-form-label",19),o(14,"Unit of Measure"),t(),e(15,"nz-form-control")(16,"nz-select",24),g(17,Ve,1,2,"nz-option",9),t()()(),e(18,"nz-form-item")(19,"nz-form-label"),o(20,"Category"),t(),e(21,"nz-form-control"),c(22,"input",25),t()(),e(23,"div",26)(24,"div",27)(25,"nz-form-item")(26,"nz-form-label"),o(27,"Reorder Point"),t(),e(28,"nz-form-control"),c(29,"nz-input-number",28),t()()(),e(30,"div",27)(31,"nz-form-item")(32,"nz-form-label"),o(33,"Reorder Qty"),t(),e(34,"nz-form-control"),c(35,"nz-input-number",29),t()()()(),e(36,"nz-form-item")(37,"nz-form-label"),o(38,"Active"),t(),e(39,"nz-form-control"),c(40,"nz-switch",30),t()(),e(41,"nz-form-item")(42,"nz-form-label"),o(43,"Notes"),t(),e(44,"nz-form-control"),c(45,"textarea",31),t()()(),w()),m&2){let n=h();r(),l("formGroup",n.form),r(16),l("ngForOf",n.uomOptions),r(6),l("nzGutter",16),r(),l("nzSpan",12),r(5),l("nzMin",0),r(),l("nzSpan",12),r(5),l("nzMin",0)}}var Me=class m{constructor(i,n,a){this.itemService=i;this.fb=n;this.message=a;this.form=this.fb.group({sku:["",I.required],name:["",I.required],uom:["pcs",I.required],category:[""],reorderPoint:[null],reorderQty:[null],active:[!0],notes:[""]})}items=[];filteredItems=[];categories=[];searchQuery="";categoryFilter="";modalVisible=!1;editingItem=null;form;uomOptions=Object.entries(b).map(([i,n])=>({value:i,label:n}));ngOnInit(){this.loadData()}loadData(){this.items=this.itemService.getAll(),this.filteredItems=[...this.items],this.categories=this.itemService.getCategories()}onSearch(){let i=[...this.items];this.searchQuery&&(i=this.itemService.search(this.searchQuery)),this.categoryFilter&&(i=i.filter(n=>n.category===this.categoryFilter)),this.filteredItems=i}getUomLabel(i){return b[i]||i}showModal(){this.editingItem=null,this.form.reset({uom:"pcs",active:!0}),this.modalVisible=!0}editItem(i){this.editingItem=i,this.form.patchValue({sku:i.sku,name:i.name,uom:i.uom,category:i.category||"",reorderPoint:i.reorderPoint,reorderQty:i.reorderQty,active:i.active,notes:i.notes||""}),this.modalVisible=!0}saveItem(){if(this.form.invalid){Object.values(this.form.controls).forEach(n=>n.markAsDirty());return}let i=this.form.value;this.editingItem?(this.itemService.update(this.editingItem.id,i),this.message.success("Item updated")):(this.itemService.create(i),this.message.success("Item created")),this.modalVisible=!1,this.loadData()}static \u0275fac=function(n){return new(n||m)(_(be),_(R),_(ye))};static \u0275cmp=M({type:m,selectors:[["app-items-catalog"]],decls:36,vars:8,consts:[["itemsTable",""],[1,"items-catalog"],[1,"page-header"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","plus"],[1,"search-bar"],["nzPrefixIcon","search",2,"width","300px"],["nz-input","","placeholder","Search by SKU, name, or category",3,"ngModelChange","ngModel"],["nzPlaceHolder","Filter by Category","nzAllowClear","",2,"width","200px","margin-left","16px",3,"ngModelChange","ngModel"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[3,"nzData","nzPageSize"],[4,"ngFor","ngForOf"],["nzOkText","Save",3,"nzVisibleChange","nzOnCancel","nzOnOk","nzVisible","nzTitle"],[4,"nzModalContent"],[3,"nzValue","nzLabel"],[4,"ngIf"],[3,"nzColor"],["nz-button","","nzType","link","nzSize","small",3,"click"],["nz-form","","nzLayout","vertical",3,"formGroup"],["nzRequired",""],["nzErrorTip","SKU is required"],["nz-input","","formControlName","sku","placeholder","FLT-001"],["nzErrorTip","Name is required"],["nz-input","","formControlName","name","placeholder","Air Filter"],["formControlName","uom",2,"width","100%"],["nz-input","","formControlName","category","placeholder","Filters"],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzSpan"],["formControlName","reorderPoint",2,"width","100%",3,"nzMin"],["formControlName","reorderQty",2,"width","100%",3,"nzMin"],["formControlName","active"],["nz-input","","formControlName","notes","rows","2"]],template:function(n,a){if(n&1){let s=N();e(0,"div",1)(1,"div",2)(2,"h2"),o(3,"Items Catalog"),t(),e(4,"button",3),C("click",function(){return d(s),u(a.showModal())}),c(5,"span",4),o(6," Add Item "),t()(),e(7,"div",5)(8,"nz-input-group",6)(9,"input",7),y("ngModelChange",function(p){return d(s),S(a.searchQuery,p)||(a.searchQuery=p),u(p)}),C("ngModelChange",function(){return d(s),u(a.onSearch())}),t()(),e(10,"nz-select",8),y("ngModelChange",function(p){return d(s),S(a.categoryFilter,p)||(a.categoryFilter=p),u(p)}),C("ngModelChange",function(){return d(s),u(a.onSearch())}),g(11,Ee,1,2,"nz-option",9),t()(),e(12,"nz-table",10,0)(14,"thead")(15,"tr")(16,"th"),o(17,"SKU"),t(),e(18,"th"),o(19,"Name"),t(),e(20,"th"),o(21,"UoM"),t(),e(22,"th"),o(23,"Category"),t(),e(24,"th"),o(25,"Reorder Point"),t(),e(26,"th"),o(27,"Reorder Qty"),t(),e(28,"th"),o(29,"Active"),t(),e(30,"th"),o(31,"Actions"),t()()(),e(32,"tbody"),g(33,xe,20,8,"tr",11),t()(),e(34,"nz-modal",12),y("nzVisibleChange",function(p){return d(s),S(a.modalVisible,p)||(a.modalVisible=p),u(p)}),C("nzOnCancel",function(){return d(s),u(a.modalVisible=!1)})("nzOnOk",function(){return d(s),u(a.saveItem())}),g(35,Te,46,7,"ng-container",13),t()()}if(n&2){let s=x(13);r(9),v("ngModel",a.searchQuery),r(),v("ngModel",a.categoryFilter),r(),l("ngForOf",a.categories),r(),l("nzData",a.filteredItems)("nzPageSize",10),r(21),l("ngForOf",s.data),r(),v("nzVisible",a.modalVisible),l("nzTitle",a.editingItem?"Edit Item":"Create Item")}},dependencies:[F,V,T,j,W,L,Q,A,U,q,G,B,ae,ne,ee,te,re,ie,oe,X,J,K,H,D,O,le,me,ge,ze,fe,$,Y,Z,Se,ve,_e,ue,k,P,pe,se,de,ce,he,Ce,Ne,Ie],styles:[".items-catalog[_ngcontent-%COMP%]{padding:0}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.search-bar[_ngcontent-%COMP%]{margin-bottom:16px;display:flex;align-items:center}"]})};export{Me as ItemsCatalogComponent};
